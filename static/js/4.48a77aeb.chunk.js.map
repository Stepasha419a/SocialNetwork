{"version":3,"sources":["Components/Dialogs/Dialogs.module.css","hoc/WithAuthRedirect.js","Components/Dialogs/DialogItem/DialogItem.js","Components/Dialogs/Message/Message.js","Components/Dialogs/DialogsForm/DialogsForm.js","Components/Dialogs/Dialogs.js","Components/Dialogs/DialogsContainer.js"],"names":["module","exports","mapStateToPropsForRedirect","state","isAuth","auth","DialogItem","props","path","id","className","s","dialog","src","image","alt","to","dialogItem","name","Message","message","maxLength15","maxLengthCreator","AddMessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","value","newMessageBody","validate","required","type","Dialogs","dialogsId","match","params","useEffect","dialogsPage","dialogElements","users","usersForArray","map","dialogs","dialogsItems","messages","messagesForArray","Number","formData","console","log","setDialog","sendMessage","compose","connect","dispatch","sendMessageCreator","dialogId","setDialogId","withRouter","Component","RedirectComponent","this","React"],"mappings":"iGACAA,EAAOC,QAAU,CAAC,QAAU,yBAAyB,aAAe,8BAA8B,OAAS,wBAAwB,OAAS,wBAAwB,SAAW,0BAA0B,QAAU,yBAAyB,WAAa,8B,mICGrPC,EAA6B,SAACC,GAAD,MAAY,CACzCC,OAAQD,EAAME,KAAKD,S,kCCWRE,EAXI,SAACC,GAEhB,IAAIC,EAAO,YAAcD,EAAME,GAE/B,OACI,sBAAKC,UAAWC,IAAEC,OAAQH,GAAIF,EAAME,GAApC,UACI,qBAAKI,IAAKC,IAAOC,IAAK,cACtB,cAAC,IAAD,CAASC,GAAIR,EAAME,UAAWC,IAAEM,WAAhC,SAA6CV,EAAMW,WCJhDC,EALC,SAACZ,GACb,OACI,qBAAKG,UAAWC,IAAES,QAAlB,SAA4Bb,EAAMa,W,iCCApCC,EAAcC,YAAiB,IAetBC,EAJaC,YAAU,CAClCC,KAAM,wBADkBD,EATL,SAACjB,GACpB,OACI,uBAAMmB,SAAUnB,EAAMoB,aAAtB,UACI,8BAAK,cAACC,EAAA,EAAD,CAAOV,KAAM,iBAAkBW,UAAWC,IAAUC,MAAOxB,EAAMyB,eAAgBC,SAAU,CAACC,IAAUb,OAC3G,8BAAK,wBAAQc,KAAM,SAAd,0BCmDFC,EAvDC,SAAC7B,GAEb,IAAI8B,EAAY9B,EAAM+B,MAAMC,OAAOF,UAWnC,GATAG,qBAAU,WAEGH,GACA,MAIV,CAACA,KAEC9B,EAAMH,OAAQ,OAAO,cAAC,IAAD,CAAUY,GAAG,WAEvC,IAAIb,EAAQI,EAAMkC,YAEbJ,IACDA,EAAY,GAGhB,IAAIK,EAAiBvC,EAAMwC,MAAMC,cAAcC,KAAI,SAAAjC,GAAM,OAAI,cAAC,EAAD,CAAYM,KAAMN,EAAOM,KAAsBT,GAAIG,EAAOH,IAAtBG,EAAOH,OAWpGuB,EAAiB7B,EAAM6B,eAS3B,OACI,sBAAKtB,UAAWC,IAAEmC,QAAlB,UACI,qBAAKpC,UAAWC,IAAEoC,aAAlB,SACKL,IAEL,qBAAKhC,UAAWC,IAAEqC,SAAlB,SACI,gCAvBJ7C,EAAM6C,SAASC,iBACR9C,EAAM6C,SAASC,iBAAiBC,OAAOb,IAAYQ,KAAI,SAAAzB,GAAO,OAAI,cAAC,EAAD,CAASA,QAASA,EAAQA,SAAcA,EAAQX,OAExHN,EAAM6C,SAASC,sBAApB,EACW9C,EAAM6C,SAASH,KAAI,SAAAzB,GAAO,OAAI,cAAC,EAAD,CAASA,QAASA,EAAQA,SAAcA,EAAQX,OAmBzD,wBACpB,cAAC,EAAD,CAAgBiB,SAdZ,SAACyB,GACjBC,QAAQC,IAAIF,GACZ5C,EAAM+C,UAAUJ,OAAOb,IACvBe,QAAQC,IAAIhB,GACZ9B,EAAMgD,YAAYJ,EAASnB,iBAU0BA,eAAgBA,a,QC/B9DwB,sBACXC,aAlBkB,SAACtD,GACnB,MAAO,CACHsC,YAAatC,EAAMsC,gBAIF,SAACiB,GACtB,MAAO,CACHH,YAAa,SAACvB,GACV0B,EAASC,YAAmB3B,KAEhCsB,UAAW,SAACM,GACRF,EAASG,YAAYD,SAO7BE,KLlB4B,SAACC,GAAe,IACtCC,EADqC,uKAGnC,OAAKC,KAAK1D,MAAMH,OACT,cAAC2D,EAAD,eAAeE,KAAK1D,QADI,cAAC,IAAD,CAAUS,GAAG,eAHT,GACXkD,IAAMH,WAQtC,OADqCN,YAAQvD,EAARuD,CAAoCO,KKQ9DR,CAIbpB","file":"static/js/4.48a77aeb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogs\":\"Dialogs_dialogs__2xp4L\",\"dialogsItems\":\"Dialogs_dialogsItems__1h0Fr\",\"dialog\":\"Dialogs_dialog__2rCpF\",\"active\":\"Dialogs_active__1gAP3\",\"messages\":\"Dialogs_messages__3BnXf\",\"message\":\"Dialogs_message__1_Ih0\",\"dialogItem\":\"Dialogs_dialogItem__CfNnJ\"};","import React from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { connect } from 'react-redux'\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n    isAuth: state.auth.isAuth\r\n})\r\n\r\nexport const WithAuthRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to='/login' />\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n\r\n    let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent)\r\n    return ConnectedAuthRedirectComponent\r\n}","import React from 'react'\r\nimport s from '../Dialogs.module.css'\r\nimport image from '../../../assets/images/defaultIcon.png'\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst DialogItem = (props) => {\r\n\r\n    let path = '/dialogs/' + props.id\r\n\r\n    return (\r\n        <div className={s.dialog} id={props.id}>\r\n            <img src={image} alt={'fail load'} />\r\n            <NavLink to={path} className={s.dialogItem}>{props.name}</NavLink>\r\n        </div >\r\n    )\r\n}\r\nexport default DialogItem","import React from 'react'\r\nimport s from '../Dialogs.module.css'\r\n\r\nconst Message = (props) => {\r\n    return (\r\n        <div className={s.message}>{props.message}</div>\r\n    )\r\n}\r\nexport default Message","import React from 'react'\r\nimport { reduxForm, Field } from 'redux-form'\r\nimport { maxLengthCreator, required } from '../../../utilits/validators/validators'\r\nimport { Textarea } from '../../common/FormsControls/FormsControls'\r\n\r\nconst maxLength15 = maxLengthCreator(15)\r\n\r\nconst AddMessageForm = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div><Field name={'newMessageBody'} component={Textarea} value={props.newMessageBody} validate={[required, maxLength15]}></Field></div>\r\n            <div><button type={'submit'}>Send</button></div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm({\r\n    form: 'dialogAddMessageForm'\r\n})(AddMessageForm)\r\n\r\nexport default AddMessageFormRedux","import React, { useEffect } from 'react'\r\nimport s from './Dialogs.module.css'\r\nimport DialogItem from './DialogItem/DialogItem'\r\nimport Message from './Message/Message'\r\nimport { Redirect } from 'react-router-dom'\r\nimport AddMessageForm from './DialogsForm/DialogsForm'\r\n\r\nconst Dialogs = (props) => {\r\n\r\n    let dialogsId = props.match.params.dialogsId\r\n\r\n    useEffect(() => {\r\n        let refreshDialogs = () => {\r\n            if (!dialogsId) {\r\n                <Redirect to='/dialogs' />\r\n            }\r\n        }\r\n        refreshDialogs()\r\n    }, [dialogsId])\r\n\r\n    if (!props.isAuth) return <Redirect to='/login' />\r\n\r\n    let state = props.dialogsPage\r\n\r\n    if (!dialogsId) {\r\n        dialogsId = 0\r\n    }\r\n\r\n    let dialogElements = state.users.usersForArray.map(dialog => <DialogItem name={dialog.name} key={dialog.id} id={dialog.id} />)\r\n\r\n    let messageElements = () => {\r\n        if (state.messages.messagesForArray) {\r\n            return state.messages.messagesForArray[Number(dialogsId)].map(message => <Message message={message.message} key={message.id} />)\r\n        }\r\n        if (!state.messages.messagesForArray) {\r\n            return state.messages.map(message => <Message message={message.message} key={message.id} />)\r\n        }\r\n    }\r\n\r\n    let newMessageBody = state.newMessageBody\r\n\r\n    let addNewMessage = (formData) => {\r\n        console.log(formData)\r\n        props.setDialog(Number(dialogsId))\r\n        console.log(dialogsId)\r\n        props.sendMessage(formData.newMessageBody)\r\n    }\r\n\r\n    return (\r\n        <div className={s.dialogs}>\r\n            <div className={s.dialogsItems}>\r\n                {dialogElements}\r\n            </div>\r\n            <div className={s.messages}>\r\n                <div>{messageElements()}<div />\r\n                    <AddMessageForm onSubmit={addNewMessage} newMessageBody={newMessageBody} />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Dialogs","import { sendMessageCreator, setDialogId } from './../../redux/dialogsReducer'\r\nimport { connect } from 'react-redux'\r\nimport { WithAuthRedirect } from '../../hoc/WithAuthRedirect'\r\nimport Dialogs from './Dialogs'\r\nimport { compose } from 'redux'\r\nimport { withRouter } from 'react-router'\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        dialogsPage: state.dialogsPage\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        sendMessage: (newMessageBody) => {\r\n            dispatch(sendMessageCreator(newMessageBody))\r\n        },\r\n        setDialog: (dialogId) => {\r\n            dispatch(setDialogId(dialogId))\r\n        }\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withRouter,\r\n    WithAuthRedirect\r\n)(Dialogs)"],"sourceRoot":""}